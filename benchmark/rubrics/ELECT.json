{
  "repo": "ELECT",
  "tests": [
    {
      "id": "check_java_tools",
      "type": "commands_exist",
      "params": {
        "names": ["java", "javac"]
      },
      "score": 2
    },
    {
      "id": "check_build_tools",
      "type": "commands_exist",
      "params": {
        "names": ["ant", "mvn", "make"]
      },
      "score": 2
    },
    {
      "id": "check_c_tools",
      "type": "commands_exist",
      "params": {
        "names": ["gcc", "clang", "llvm-config"]
      },
      "score": 2
    },
    {
      "id": "check_python_tools",
      "type": "commands_exist",
      "params": {
        "names": ["python3", "pip3"]
      }
    },
    {
      "id": "check_system_tools",
      "type": "commands_exist",
      "params": {
        "names": ["bc", "git", "curl", "pkg-config"]
      }
    },
    {
      "id": "check_java_version",
      "type": "output_contains",
      "params": {
        "command": "java -version",
        "contains": ["11"]
      },
      "timeout": 10,
      "score": 2,
      "requires": ["check_java_tools"]
    },
    {
      "id": "check_ant_version",
      "type": "output_contains",
      "params": {
        "command": "ant -version",
        "contains": ["Apache Ant", "Ant"]
      },
      "timeout": 10,
      "requires": ["check_build_tools"]
    },
    {
      "id": "check_maven_version",
      "type": "output_contains",
      "params": {
        "command": "mvn -version",
        "contains": ["Apache Maven", "Maven"]
      },
      "timeout": 10,
      "requires": ["check_build_tools"]
    },
    {
      "id": "check_clang_version",
      "type": "output_contains",
      "params": {
        "command": "clang --version",
        "contains": ["clang"]
      },
      "timeout": 10,
      "requires": ["check_c_tools"]
    },
    {
      "id": "check_llvm_version",
      "type": "output_contains",
      "params": {
        "command": "llvm-config --version",
        "contains": ["1", "2", "3", "4", "5", "6", "7", "8", "9"]
      },
      "timeout": 10,
      "requires": ["check_c_tools"]
    },
    {
      "id": "check_python_version",
      "type": "output_contains",
      "params": {
        "command": "python3 --version",
        "contains": ["Python 3"]
      },
      "timeout": 10,
      "requires": ["check_python_tools"]
    },
    {
      "id": "check_git_version",
      "type": "output_contains",
      "params": {
        "command": "git --version",
        "contains": ["git"]
      },
      "timeout": 10,
      "requires": ["check_system_tools"]
    },
    {
      "id": "check_java_home_env",
      "type": "envvar_set",
      "params": {
        "name": "JAVA_HOME"
      },
      "score": 1
    },
    {
      "id": "check_java_in_path",
      "type": "output_contains",
      "params": {
        "command": "echo $PATH",
        "contains": ["java"]
      },
      "timeout": 10,
      "score": 1
    },
    {
      "id": "check_main_directories",
      "type": "dirs_exist",
      "params": {
        "paths": [
          "src",
          "src/elect",
          "src/coldTier",
          "scripts",
          "scripts/ycsb"
        ]
      },
      "score": 3
    },
    {
      "id": "check_root_files",
      "type": "files_exist",
      "params": {
        "paths": [
          "README.md",
          "AE_INSTRUCTION.md"
        ]
      },
      "score": 2
    },
    {
      "id": "check_build_files",
      "type": "files_exist",
      "params": {
        "paths": [
          "src/elect/build.xml",
          "src/coldTier/Makefile",
          "scripts/ycsb/pom.xml",
          "scripts/settings.sh"
        ]
      },
      "score": 3
    },
    {
      "id": "check_libisal_dev",
      "type": "run_command",
      "params": {
        "command": "pkg-config --exists libisal"
      },
      "timeout": 10,
      "score": 2
    },
    {
      "id": "test_java_compilation",
      "type": "run_command",
      "params": {
        "command": "echo 'public class Test { public static void main(String[] args) { System.out.println(\"Hello\"); } }' > Test.java && javac Test.java && rm -f Test.java Test.class"
      },
      "timeout": 30,
      "score": 2,
      "requires": ["check_java_tools"]
    },
    {
      "id": "test_c_compilation",
      "type": "run_command",
      "params": {
        "command": "echo '#include <stdio.h>\nint main() { printf(\"Hello\\n\"); return 0; }' > test.c && gcc -o test test.c && ./test && rm -f test.c test"
      },
      "timeout": 30,
      "score": 2,
      "requires": ["check_c_tools"]
    },
    {
      "id": "test_clang_compilation",
      "type": "run_command",
      "params": {
        "command": "echo '#include <stdio.h>\nint main() { printf(\"Hello\\n\"); return 0; }' > test_clang.c && clang -o test_clang test_clang.c && ./test_clang && rm -f test_clang.c test_clang"
      },
      "timeout": 30,
      "score": 2,
      "requires": ["check_c_tools"]
    },
    {
      "id": "test_python_execution",
      "type": "run_command",
      "params": {
        "command": "python3 -c \"print('Hello from Python')\""
      },
      "timeout": 30,
      "score": 1,
      "requires": ["check_python_tools"]
    },
    {
      "id": "test_pip_list",
      "type": "run_command",
      "params": {
        "command": "pip3 list"
      },
      "timeout": 30,
      "score": 1,
      "requires": ["check_python_tools"]
    },
    {
      "id": "test_ant_help",
      "type": "run_command",
      "params": {
        "command": "ant -help"
      },
      "timeout": 30,
      "score": 1,
      "requires": ["check_build_tools", "check_build_files"]
    },
    {
      "id": "test_ant_project_help",
      "type": "run_command",
      "params": {
        "command": "ant -projecthelp"
      },
      "timeout": 30,
      "score": 1,
      "requires": ["check_build_tools", "check_build_files"]
    },
    {
      "id": "test_maven_help",
      "type": "run_command",
      "params": {
        "command": "mvn -help"
      },
      "timeout": 30,
      "score": 1,
      "requires": ["check_build_tools"]
    },
    {
      "id": "test_maven_validate",
      "type": "run_command",
      "params": {
        "command": "mvn -f scripts/ycsb/pom.xml validate"
      },
      "timeout": 60,
      "score": 2,
      "requires": ["check_build_tools", "check_build_files"]
    },
    {
      "id": "test_make_coldtier",
      "type": "run_command",
      "params": {
        "command": "make -f src/coldTier/Makefile"
      },
      "timeout": 30,
      "score": 2,
      "requires": ["check_build_tools", "check_build_files"]
    },
    {
      "id": "test_isal_compilation",
      "type": "run_command",
      "params": {
        "command": "echo '#include <isa-l.h>\nint main() { return 0; }' > test_isal.c && gcc -o test_isal test_isal.c $(pkg-config --cflags --libs libisal) && rm -f test_isal.c test_isal"
      },
      "timeout": 60,
      "score": 3,
      "requires": ["check_c_tools", "check_libisal_dev"]
    }
  ]
}